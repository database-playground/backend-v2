# Events

負責觸發事件和加減點數的 service。

## 事件表

### 憑證管理

- `login`：登入帳號
- `impersonated`：管理員嘗試取得登入憑證
- `logout`：登出帳號
- `logout_all`：撤銷這個使用者的所有登入憑證

### 作答管理

- `submit_answer`：提交答案

## 點數發放規則

### 登入相關

#### 每日登入 (Daily Login)

- **點數**: 20 點
- **條件**: 使用者每天第一次登入時獲得
- **描述**: `"daily login"`

#### 每週登入 (Weekly Login)

- **點數**: 50 點
- **條件**: 使用者連續 7 天每天都登入時獲得
- **描述**: `"weekly login"`

### 作答相關

#### 首次嘗試 (First Attempt)

- **點數**: 30 點
- **條件**: 使用者第一次嘗試某個問題時獲得（無論答案是否正確）
- **描述**: `"first attempt on question {question_id}"`

#### 每日嘗試 (Daily Attempt)

- **點數**: 30 點
- **條件**: 使用者每天第一次提交答案時獲得（無論答案是否正確）
- **描述**: `"daily attempt"`

#### 正確答案 (Correct Answer)

- **點數**: 60 點
- **條件**: 使用者第一次答對某個問題時獲得
- **描述**: `"correct answer on question {question_id}"`

#### 第一名 (First Place)

- **點數**: 80 點
- **條件**: 使用者是第一個答對某個問題的人
- **描述**: `"first place on question {question_id}"`

### 點數累計規則

當使用者提交答案時，系統會依序檢查並發放以下點數：

1. **首次嘗試點數** - 如果是第一次嘗試該問題
2. **每日嘗試點數** - 如果是當天第一次提交答案
3. **正確答案點數** - 如果答案正確且是第一次答對該問題
4. **第一名點數** - 如果答案正確且是所有使用者中第一個答對該問題

單次提交最多可獲得：30 (首次嘗試) + 30 (每日嘗試) + 50 (正確答案) + 75 (第一名) = **185 點**
